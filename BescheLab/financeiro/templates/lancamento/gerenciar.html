{%extends 'layout.html'%} 
{% block conteudo %}
<div class="page-title">
	<div class="title_left">
		<h3>{{ operacao.nome }}</h3>
	</div>
</div>
<div class="clearfix"></div>
<div class="row">
	<div class="col-md-12 col-sm-12 col-xs-12">
		<div class="x_panel">
			<div class="x_title">
				<h2>Adicionar Lançamento</h2>
				<ul class="nav navbar-right panel_toolbox">
					<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
				</ul>
				<div class="clearfix"></div>
			</div>
			<div class="x_content">
				<form id="demo-form2" class="form-horizontal form-label-left" method="POST"> {% csrf_token %}
					<div class="row">
					
						<div class="form-group col-md-11 col-sm-11 col-xs-12">
                        	<label class="control-label col-md-3 col-sm-3 col-xs-12">Pessoa *</label>
                        	<div class="col-md-7 col-sm-7 col-xs-12">
                          		<select class="select2_single form-control" tabindex="-1">
		                            <option></option>
		                            {% for pessoa in pessoas %}
		                            <option value="{{pessoa.pk}}"> {{pessoa.nome}} </option>
		                            {% endfor %}
                          		</select>
                        	</div>
                      	</div>

						<div class="form-group col-md-11 col-sm-11 col-xs-12">
							<label class="control-label col-md-3 col-sm-3 col-xs-12" for="descricao">Descriçao *</label>
							<div class="col-md-7 col-sm-7 col-xs-12">
								<input type="text" id="descricao" required="required" class="form-control" 
								value="{{forml.descricao.value|default:'' }}" name="descricao">
							</div>
						</div>

						<!--AutoComplete-->
						<div class="form-group">
                      		<label class="control-label col-md-3 col-sm-3 col-xs-12">AutoComplete</label>
                      		<div class="col-md-9 col-sm-9 col-xs-12">
                        	<input type="text" name="country" id="autocomplete-custom-append" class="form-control col-md-10" style="float: left;" />
                        <div id="autocomplete-container" style="position: relative; float: left; width: 400px; margin: 10px;"></div>
                      		</div>
                    	</div>
                    	<!--AutoComplete-->

						<div class="form-group col-md-11 col-sm-11 col-xs-12">
							<label class="control-label col-md-3 col-sm-3 col-xs-12" for="valor">Valor *</label>
							<div class="col-md-3 col-sm-2 col-xs-12">
								<input type="number" id="valor" required="required" class="form-control"
									value="{{forml.valor.value|default:'' }}" name="valor">
							</div>
							
							<!-- label class="control-label col-md-1 col-sm-2 col-xs-12" for="data">Data *</label>
							<div class="col-md-3 col-sm-3 col-xs-12">
								<input type="text" id="data" class="form-control"
									value="" name="data">
							</div-->
						</div>

						<div class="form-group col-md-11 col-sm-11 col-xs-12">
							<label class="control-label col-md-3 col-sm-3 col-xs-12" for="parcelado">Parcelado *</label>
                      		<div id="parcelado" class="btn-group col-md-2 col-sm-3 col-xs-12" data-toggle="buttons">
                               	<label class="btn btn-sm btn-default active" data-toggle-class="btn-primary" 
                               		data-toggle-passive-class="btn-default">
                                 		<input type="radio" name="parcelado" value="True"> Sim 
                               	</label>
                               	<label class="btn btn-sm btn-primary" data-toggle-class="btn-primary" 
                               		data-toggle-passive-class="btn-default">
                                 		<input type="radio" name="parcelado" value="False"> Não 
                               	</label>
                             </div>
							
							<label class="control-label col-md-1 col-sm-2 col-xs-12" for="n_parcelas">Parcelas</label>
							<div class="col-md-1 col-sm-1 col-xs-12">
								<input type="number" id="n_parcelas" class="form-control"
									value="{{forml.n_parcelas.value|default:'' }}" name="n_parcelas">
							</div>
							
							<!-- div class="">
                            	<label>
                              		<input type="checkbox" class="js-switch" data-switchery="true" style="display: none;">
                              		<span class="switchery switchery-default" style="box-shadow: rgb(223, 223, 223) 0px 0px 0px 0px inset; 
                              		border-color: rgb(223, 223, 223); background-color: rgb(255, 255, 255); 
                              		transition: border 0.4s, box-shadow 0.4s;">
                              			<small style="left: 0px; transition: background-color 0.4s, left 0.2s;"></small>
									</span> Pago
                            	</label>
                          	</div-->
						</div>

					</div>

						<div class="form-group col-md-11 col-sm-12 col-xs-12">
							<div class="col-md-offset-3">
								<button type="submit" class="btn btn-sm btn-primary">Adicionar</button>
							</div>
						</div>
						
				</form>
			</div>
		</div>
	</div>
</div>


<div class="col-md-12 col-sm-12 col-xs-12">
	<div class="x_panel">
		<div class="x_title">
			<h2>Lançamentos em Aberto</h2>
			<ul class="nav navbar-right panel_toolbox">
				<li>
					<a href="#"><i class="fa fa-chevron-up"></i></a>
				</li>
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
					<ul class="dropdown-menu" role="menu">
						<li>
							<a href="#">Settings 1</a>
						</li>
						<li>
							<a href="#">Settings 2</a>
						</li>
					</ul>
				</li>
				<li>
					<a href="#"><i class="fa fa-close"></i></a>
				</li>
			</ul>
			<div class="clearfix"></div>
		</div>
		<div class="x_content">
			<table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th class="col-md-3 col-sm-11 col-xs-11">Descrição</th>
							<th class="col-md-2 col-sm-11 col-xs-11">Valor</th>
							<th class="col-md-3 col-sm-11 col-xs-11">Pessoa</th>
							<th class="col-md-2 col-sm-11 col-xs-11">Data</th>
							<th class="col-md-1 col-sm-11 col-xs-11">Parcela</th>
							<th class="col-md-1 col-sm-1 col-xs-1"></th>
							<th class="col-md-1 col-sm-1 col-xs-1"></th>
							<th class="col-md-1 col-sm-1 col-xs-1"></th>
						</tr>
					</thead>

					<tbody>
						{% for lancamento in lancamentos %}
						{% if lancamento.tipo == operacao %}
						<tr>
							<td title="Gerenciar operação" 
								onclick="location.href = '{% url 'operacao_editar' operacao.pk %}';" 
								style="cursor: pointer;">{{ lancamento.descricao }}
							</td>
							<td title="Gerenciar operação" 
								onclick="location.href = '{% url 'operacao_editar' operacao.pk %}';" 
								style="cursor: pointer;">{{ lancamento.valor }}
							</td>
							<td title="Gerenciar operação" 
								onclick="location.href = '{% url 'operacao_editar' operacao.pk %}';" 
								style="cursor: pointer;">{{ lancamento.pessoa.nome }}
							</td>
							<td title="Gerenciar operação" 
								onclick="location.href = '{% url 'operacao_editar' operacao.pk %}';" 
								style="cursor: pointer;">{{ lancamento.data }}
							</td>
							{% if lancamento.parcelado == True %}
							<td title="Gerenciar operação" 
								onclick="location.href = '{% url 'operacao_editar' operacao.pk %}';" 
								style="cursor: pointer;">{{ lancamento.parcelado }}
							</td>
							
							<td>
								<i onclick="location.href = '{% url 'operacao_apagar' operacao.pk %}';" 
								style="cursor: pointer;" aria-hidden="true" data-toggle="tooltip" 
								data-placement="top" data-original-title="Pagar Parcela" 
								class="fa fa-trash-o fa-lg fa-pull-right"></i>
							</td>
							{% else %}
							<td></td>
							<td></td>
							{% endif %}
							<td>
								<i onclick="location.href = '{% url 'operacao_apagar' operacao.pk %}';" 
								style="cursor: pointer;" aria-hidden="true" data-toggle="tooltip" 
								data-placement="top" data-original-title="Pagar Parte" 
								class="fa fa-trash-o fa-lg fa-pull-right"></i>
							</td>
							<td>
								<i onclick="location.href = '{% url 'operacao_apagar' operacao.pk %}';" 
								style="cursor: pointer;" aria-hidden="true" data-toggle="tooltip" 
								data-placement="top" data-original-title="Pagar Todo" 
								class="fa fa-trash-o fa-lg fa-pull-right"></i>
							</td>
						</tr>
						{% endif %}
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
{% endblock%}
